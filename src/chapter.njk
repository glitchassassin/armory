---
layout: base
meta:
    type: "chapter"
pagination:
    data: bible.chapters
    size: 1
    resolve: values
    alias: currentChapter
permalink: "{{ currentChapter.slug }}"
eleventyComputed:
    title: "Armorer | {{ currentChapter.title }}"
    pageHeader: "Chapter {{ currentChapter.number }}"
    meta:
        description: "A beautiful minimal Bible reading experience."
---
{% macro renderChapter(chapter, withVerseIds = false) %}
<div id="content" x-data="infiniteScrollContext" class="position-relative d-flex" data-book="{{ chapter.book }}" data-chapter="{{ chapter.number }}" data-chapter-slug="{{ chapter.slug }}" data-title="{{ title }}" data-next-chapter="{{ chapter.nextChapter }}" data-prev-chapter="{{ chapter.prevChapter }}">
    <div x-intersect="chapterIntersected('{{ chapter.slug }}');" x-intersect.full="chapterIntersected('{{ chapter.slug }}', true);" class="pe-none position-absolute top-0 start-0 end-0" style="height: 50vh;"></div>
    <main class="container">
        <header class="sticky-top">
            <!-- this nested div is a hack to fix 1px gap with sticky header -->
            <div class="bg-dark fw-bold p-2 position-relative" style="top: -2px;">
                <a href="{{chapter.book.slug}}" class="link-light">{{ chapter.book.title }}</a>
                &nbsp;âŸ«&nbsp;
                <a href="{{chapter.slug}}" class="link-light">Chapter {{ chapter.number }}</a>
            </div>
        </header>
        <article>
            {{ chapter.content | safe }}
        </article>
    </main>
    <div x-intersect="chapterIntersected('{{ chapter.slug }}');" x-intersect.full="chapterIntersected('{{ chapter.slug }}', true);" class="pe-none position-absolute bottom-0 start-0 end-0" style="height: 50vh;"></div>
    {# Provides padding to immediately scroll to the correct verse without running into the bottom of the window #}
    <div class="pe-none position-absolute top-100 start-0 end-0" style="height: 100vh;"></div>
</div>
{% endmacro %}

{{renderChapter(currentChapter, true)}}
{% if pagination.page.next %} {{renderChapter(pagination.page.next)}} {% endif %}

{% rollup "src/js/infinite-scroll.js" %}
{% rollup "src/js/copy-paste.js" %}
{% rollup "src/js/local-scroll.js" %}